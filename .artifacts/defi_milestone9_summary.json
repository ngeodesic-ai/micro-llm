{
  "milestone": "defi_milestone9",
  "status": "pass",
  "rails": "stage11",
  "T": 180,
  "runs": 3,
  "policy": {
    "ltv_max": 0.75,
    "hf_min": 1.0,
    "mapper": {
      "model_path": ".artifacts/defi_mapper.joblib",
      "confidence_threshold": 0.7
    }
  },
  "context": {
    "oracle": {
      "age_sec": 5,
      "max_age_sec": 30
    }
  },
  "metrics": {
    "edge_total": 4,
    "edge_caught": 4,
    "edge_coverage": 1.0,
    "false_approvals": 0,
    "exec_total": 2,
    "exec_pass": 2,
    "exec_accuracy": 1.0
  },
  "failures": [],
  "elapsed_sec": 0.896,
  "scenarios": [
    {
      "name": "edge_ltv_withdraw_unsafe",
      "type": "edge",
      "prompt": "withdraw 5 ETH",
      "runs": 3,
      "stable_reason": true,
      "reasons": [
        "ltv",
        "ltv",
        "ltv"
      ],
      "output": {
        "prompt": "withdraw 5 ETH",
        "top1": null,
        "flags": {
          "oracle_stale": false
        },
        "verify": {
          "ok": false,
          "reason": "ltv"
        },
        "plan": {
          "sequence": []
        },
        "aux": {
          "features": [
            "deposit",
            "withdraw",
            "borrow",
            "repay",
            "swap",
            "addcol",
            "remcol"
          ],
          "prior": {
            "deposit_asset": 0.0,
            "withdraw_asset": 0.0,
            "borrow_asset": 0.0,
            "repay_loan": 0.0,
            "swap_asset": 0.0,
            "add_collateral": 0.0,
            "remove_collateral": 0.0
          },
          "mapper_confidence": 0.0
        }
      },
      "ok": true,
      "why": ""
    },
    {
      "name": "edge_hf_health_breach",
      "type": "edge",
      "prompt": "increase borrow to the maximum",
      "runs": 3,
      "stable_reason": true,
      "reasons": [
        "hf",
        "hf",
        "hf"
      ],
      "output": {
        "prompt": "increase borrow to the maximum",
        "top1": null,
        "flags": {
          "oracle_stale": false
        },
        "verify": {
          "ok": false,
          "reason": "hf"
        },
        "plan": {
          "sequence": []
        },
        "aux": {
          "features": [
            "deposit",
            "withdraw",
            "borrow",
            "repay",
            "swap",
            "addcol",
            "remcol"
          ],
          "prior": {
            "deposit_asset": 0.0,
            "withdraw_asset": 0.0,
            "borrow_asset": 0.0,
            "repay_loan": 0.0,
            "swap_asset": 0.0,
            "add_collateral": 0.0,
            "remove_collateral": 0.0
          },
          "mapper_confidence": 0.0
        }
      },
      "ok": true,
      "why": ""
    },
    {
      "name": "edge_oracle_stale_price",
      "type": "edge",
      "prompt": "borrow 1000 USDC",
      "runs": 3,
      "stable_reason": true,
      "reasons": [
        "hf",
        "hf",
        "hf"
      ],
      "output": {
        "prompt": "borrow 1000 USDC",
        "top1": null,
        "flags": {
          "oracle_stale": true
        },
        "verify": {
          "ok": false,
          "reason": "hf"
        },
        "plan": {
          "sequence": []
        },
        "aux": {
          "features": [
            "deposit",
            "withdraw",
            "borrow",
            "repay",
            "swap",
            "addcol",
            "remcol"
          ],
          "prior": {
            "deposit_asset": 0.0,
            "withdraw_asset": 0.0,
            "borrow_asset": 0.0,
            "repay_loan": 0.0,
            "swap_asset": 0.0,
            "add_collateral": 0.0,
            "remove_collateral": 0.0
          },
          "mapper_confidence": 0.0
        }
      },
      "ok": true,
      "why": ""
    },
    {
      "name": "edge_mapper_low_conf_or_nonexec",
      "type": "edge",
      "prompt": "stake xyz",
      "runs": 3,
      "stable_reason": true,
      "reasons": [
        "abstain_non_exec",
        "abstain_non_exec",
        "abstain_non_exec"
      ],
      "output": {
        "prompt": "stake xyz",
        "top1": null,
        "flags": {
          "abstain_non_exec": true,
          "oracle_stale": false
        },
        "verify": {
          "ok": false,
          "reason": "abstain_non_exec"
        },
        "plan": {
          "sequence": []
        },
        "aux": {
          "features": [
            "deposit",
            "withdraw",
            "borrow",
            "repay",
            "swap",
            "addcol",
            "remcol"
          ],
          "prior": {
            "deposit_asset": 0.0,
            "withdraw_asset": 0.0,
            "borrow_asset": 0.0,
            "repay_loan": 0.0,
            "swap_asset": 0.0,
            "add_collateral": 0.0,
            "remove_collateral": 0.0
          },
          "mapper_confidence": 0.0
        }
      },
      "ok": true,
      "why": ""
    },
    {
      "name": "ok_deposit",
      "type": "exec_ok",
      "prompt": "deposit 10 ETH into aave",
      "runs": 1,
      "output": {
        "prompt": "deposit 10 ETH into aave",
        "top1": "deposit_asset",
        "flags": {
          "oracle_stale": false
        },
        "verify": {
          "ok": true,
          "reason": ""
        },
        "plan": {
          "sequence": [
            "deposit_asset"
          ]
        },
        "aux": {
          "features": [
            "deposit",
            "withdraw",
            "borrow",
            "repay",
            "swap",
            "addcol",
            "remcol"
          ],
          "prior": {
            "deposit_asset": 1.0,
            "withdraw_asset": 0.0,
            "borrow_asset": 0.0,
            "repay_loan": 0.0,
            "swap_asset": 0.0,
            "add_collateral": 0.0,
            "remove_collateral": 0.0
          },
          "mapper_confidence": 0.92,
          "stage10": {
            "note": "fallback ranking"
          }
        }
      },
      "ok": true,
      "why": ""
    },
    {
      "name": "ok_swap",
      "type": "exec_ok",
      "prompt": "swap 2 ETH for USDC",
      "runs": 1,
      "output": {
        "prompt": "swap 2 ETH for USDC",
        "top1": "swap_asset",
        "flags": {
          "oracle_stale": false
        },
        "verify": {
          "ok": true,
          "reason": ""
        },
        "plan": {
          "sequence": [
            "swap_asset"
          ]
        },
        "aux": {
          "features": [
            "deposit",
            "withdraw",
            "borrow",
            "repay",
            "swap",
            "addcol",
            "remcol"
          ],
          "prior": {
            "deposit_asset": 0.0,
            "withdraw_asset": 0.0,
            "borrow_asset": 0.0,
            "repay_loan": 0.0,
            "swap_asset": 1.0,
            "add_collateral": 0.0,
            "remove_collateral": 0.0
          },
          "mapper_confidence": 0.92,
          "stage10": {
            "note": "fallback ranking"
          }
        }
      },
      "ok": true,
      "why": ""
    }
  ]
}