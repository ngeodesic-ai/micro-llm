{
  "milestone": "defi_milestone4",
  "status": "pass",
  "rails": "stage11",
  "T": 180,
  "runs": 2,
  "scenarios": [
    {
      "name": "deposit_eth",
      "ok": true,
      "reason": "",
      "output": {
        "prompt": "deposit 10 ETH into aave",
        "context_hash": "c2e20684",
        "policy": {
          "mapper": {
            "model_path": ".artifacts/defi_mapper.joblib",
            "confidence_threshold": 0.7
          },
          "ltv_max": 0.75,
          "rails": {
            "denoise": true
          }
        },
        "rails": "stage11",
        "T": 180,
        "stable_top1": true,
        "top1_list": [
          "deposit_asset",
          "deposit_asset"
        ],
        "verify_ok_list": [
          true,
          true
        ],
        "outputs": [
          {
            "iteration": 0,
            "top1": "deposit_asset",
            "flags": {
              "oracle_stale": false
            },
            "verify": {
              "ok": true,
              "reason": ""
            },
            "aux": {
              "prior": {
                "deposit_asset": 1.0,
                "withdraw_asset": 0.0,
                "borrow_asset": 0.0,
                "repay_loan": 0.0,
                "swap_asset": 0.0,
                "add_collateral": 0.0,
                "remove_collateral": 0.0
              },
              "mapper_confidence": 0.92,
              "features": [
                "deposit",
                "withdraw",
                "borrow",
                "repay",
                "swap",
                "addcol",
                "remcol"
              ],
              "stage10": {
                "note": "fallback ranking"
              },
              "stage11": null
            }
          },
          {
            "iteration": 1,
            "top1": "deposit_asset",
            "flags": {
              "oracle_stale": false
            },
            "verify": {
              "ok": true,
              "reason": ""
            },
            "aux": {
              "prior": {
                "deposit_asset": 1.0,
                "withdraw_asset": 0.0,
                "borrow_asset": 0.0,
                "repay_loan": 0.0,
                "swap_asset": 0.0,
                "add_collateral": 0.0,
                "remove_collateral": 0.0
              },
              "mapper_confidence": 0.92,
              "features": [
                "deposit",
                "withdraw",
                "borrow",
                "repay",
                "swap",
                "addcol",
                "remcol"
              ],
              "stage10": {
                "note": "fallback ranking"
              },
              "stage11": null
            }
          }
        ]
      }
    },
    {
      "name": "swap_eth_usdc",
      "ok": true,
      "reason": "",
      "output": {
        "prompt": "swap 2 ETH for USDC",
        "context_hash": "b9627dd2",
        "policy": {
          "mapper": {
            "model_path": ".artifacts/defi_mapper.joblib",
            "confidence_threshold": 0.7
          },
          "ltv_max": 0.75,
          "rails": {
            "denoise": true
          }
        },
        "rails": "stage11",
        "T": 180,
        "stable_top1": true,
        "top1_list": [
          "swap_asset",
          "swap_asset"
        ],
        "verify_ok_list": [
          true,
          true
        ],
        "outputs": [
          {
            "iteration": 0,
            "top1": "swap_asset",
            "flags": {
              "oracle_stale": false
            },
            "verify": {
              "ok": true,
              "reason": ""
            },
            "aux": {
              "prior": {
                "deposit_asset": 0.0,
                "withdraw_asset": 0.0,
                "borrow_asset": 0.0,
                "repay_loan": 0.0,
                "swap_asset": 1.0,
                "add_collateral": 0.0,
                "remove_collateral": 0.0
              },
              "mapper_confidence": 0.92,
              "features": [
                "deposit",
                "withdraw",
                "borrow",
                "repay",
                "swap",
                "addcol",
                "remcol"
              ],
              "stage10": {
                "note": "fallback ranking"
              },
              "stage11": null
            }
          },
          {
            "iteration": 1,
            "top1": "swap_asset",
            "flags": {
              "oracle_stale": false
            },
            "verify": {
              "ok": true,
              "reason": ""
            },
            "aux": {
              "prior": {
                "deposit_asset": 0.0,
                "withdraw_asset": 0.0,
                "borrow_asset": 0.0,
                "repay_loan": 0.0,
                "swap_asset": 1.0,
                "add_collateral": 0.0,
                "remove_collateral": 0.0
              },
              "mapper_confidence": 0.92,
              "features": [
                "deposit",
                "withdraw",
                "borrow",
                "repay",
                "swap",
                "addcol",
                "remcol"
              ],
              "stage10": {
                "note": "fallback ranking"
              },
              "stage11": null
            }
          }
        ]
      }
    },
    {
      "name": "withdraw_high_ltv",
      "ok": true,
      "reason": "",
      "output": {
        "prompt": "withdraw 5 ETH",
        "context_hash": "8c288779",
        "policy": {
          "mapper": {
            "model_path": ".artifacts/defi_mapper.joblib",
            "confidence_threshold": 0.7
          },
          "ltv_max": 0.6,
          "rails": {
            "denoise": true
          }
        },
        "rails": "stage11",
        "T": 180,
        "stable_top1": true,
        "top1_list": [
          null,
          null
        ],
        "verify_ok_list": [
          false,
          false
        ],
        "outputs": [
          {
            "iteration": 0,
            "top1": null,
            "flags": {
              "abstain_non_exec": true,
              "oracle_stale": false
            },
            "verify": {
              "ok": false,
              "reason": "abstain_non_exec"
            },
            "aux": {
              "prior": {
                "deposit_asset": 0.0,
                "withdraw_asset": 0.0,
                "borrow_asset": 0.0,
                "repay_loan": 0.0,
                "swap_asset": 0.0,
                "add_collateral": 0.0,
                "remove_collateral": 0.0
              },
              "mapper_confidence": 0.0,
              "features": [
                "deposit",
                "withdraw",
                "borrow",
                "repay",
                "swap",
                "addcol",
                "remcol"
              ],
              "stage10": null,
              "stage11": null
            }
          },
          {
            "iteration": 1,
            "top1": null,
            "flags": {
              "abstain_non_exec": true,
              "oracle_stale": false
            },
            "verify": {
              "ok": false,
              "reason": "abstain_non_exec"
            },
            "aux": {
              "prior": {
                "deposit_asset": 0.0,
                "withdraw_asset": 0.0,
                "borrow_asset": 0.0,
                "repay_loan": 0.0,
                "swap_asset": 0.0,
                "add_collateral": 0.0,
                "remove_collateral": 0.0
              },
              "mapper_confidence": 0.0,
              "features": [
                "deposit",
                "withdraw",
                "borrow",
                "repay",
                "swap",
                "addcol",
                "remcol"
              ],
              "stage10": null,
              "stage11": null
            }
          }
        ]
      }
    },
    {
      "name": "borrow_low_hf",
      "ok": true,
      "reason": "",
      "output": {
        "prompt": "borrow 1000 USDC",
        "context_hash": "fa8b8161",
        "policy": {
          "mapper": {
            "model_path": ".artifacts/defi_mapper.joblib",
            "confidence_threshold": 0.7
          },
          "ltv_max": 0.75,
          "rails": {
            "denoise": true
          }
        },
        "rails": "stage11",
        "T": 180,
        "stable_top1": true,
        "top1_list": [
          null,
          null
        ],
        "verify_ok_list": [
          false,
          false
        ],
        "outputs": [
          {
            "iteration": 0,
            "top1": null,
            "flags": {
              "abstain_non_exec": true,
              "oracle_stale": false
            },
            "verify": {
              "ok": false,
              "reason": "abstain_non_exec"
            },
            "aux": {
              "prior": {
                "deposit_asset": 0.0,
                "withdraw_asset": 0.0,
                "borrow_asset": 0.0,
                "repay_loan": 0.0,
                "swap_asset": 0.0,
                "add_collateral": 0.0,
                "remove_collateral": 0.0
              },
              "mapper_confidence": 0.0,
              "features": [
                "deposit",
                "withdraw",
                "borrow",
                "repay",
                "swap",
                "addcol",
                "remcol"
              ],
              "stage10": null,
              "stage11": null
            }
          },
          {
            "iteration": 1,
            "top1": null,
            "flags": {
              "abstain_non_exec": true,
              "oracle_stale": false
            },
            "verify": {
              "ok": false,
              "reason": "abstain_non_exec"
            },
            "aux": {
              "prior": {
                "deposit_asset": 0.0,
                "withdraw_asset": 0.0,
                "borrow_asset": 0.0,
                "repay_loan": 0.0,
                "swap_asset": 0.0,
                "add_collateral": 0.0,
                "remove_collateral": 0.0
              },
              "mapper_confidence": 0.0,
              "features": [
                "deposit",
                "withdraw",
                "borrow",
                "repay",
                "swap",
                "addcol",
                "remcol"
              ],
              "stage10": null,
              "stage11": null
            }
          }
        ]
      }
    }
  ]
}